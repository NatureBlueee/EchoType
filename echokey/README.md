# EchoKey

## 你打下的每一个字，都有回声

EchoKey 是一个系统级键盘输入记录工具，确保你的每一次输入都不会丢失。

### 为什么需要 EchoKey？

- 在 AI 对话框里打了一大段话，网页崩溃，全没了？
- 语音输入录了五分钟，突然出错，白说了？
- 填表单时浏览器刷新，重新填一遍？

**只要你打出来了，EchoKey 就会保存下来。**

---

## 功能特性

### 核心功能
- ✅ **键盘监听**：记录所有按键和输入法确认的字符
- ✅ **剪贴板监听**：记录复制和粘贴的内容
- ✅ **实时写入**：每次输入立即保存到本地，即使程序崩溃也不丢数据
- ✅ **按日期分文件**：每天自动创建新的日志文件

### 快捷键
| 快捷键 | 功能 |
|--------|------|
| `Enter` | 换行并添加新时间戳 |
| `Ctrl+Enter` | 只换行，不添加时间戳（段落内换行） |
| `Ctrl+Shift+S` | 手动保存剪贴板内容 |
| `Ctrl+Shift+P` | 暂停/恢复记录 |
| `Ctrl+Shift+N` | 新建日志段 |

### 系统托盘
- 显示运行状态（记录中/已暂停）
- 暂停/恢复记录
- 打开日志目录
- 新建日志段
- 退出程序

---

## 安装

### 从源码编译

需要安装 [Rust](https://rustup.rs/)。

```bash
# 克隆仓库
git clone https://github.com/your-username/echokey.git
cd echokey

# 编译发布版本
cargo build --release

# 运行
./target/release/echokey.exe  # Windows
```

### Windows 编译

```powershell
# 确保安装了 Rust
rustup default stable

# 编译
cargo build --release

# 可执行文件位于 target/release/echokey.exe
```

---

## 日志格式

日志文件保存在 `%LOCALAPPDATA%\EchoKey\logs\` 目录下。

```
================== EchoKey 日志 ==================
日期：2025-11-26
创建时间：14:30:05
==================================================

[14:30:05] Hello World
[14:30:15] 这是第二段话
[14:31:00] [粘贴] 这是从别处复制来的内容...
[14:32:00] [手动保存] 用户主动保存的内容...
[14:33:00] --- 暂停记录 ---
[14:35:00] --- 恢复记录 ---
[14:36:00] 继续打字的内容
```

---

## 隐私说明

- 🔒 所有数据仅保存在本地
- 🔒 不上传任何数据到服务器
- 🔒 完全开源，代码可审计

**注意**：EchoKey 会记录你在任何应用中的输入，包括密码（如果你在非密码框中输入的话）。请确保只有你自己能访问日志目录。

---

## 开发

### 项目结构

```
echokey/
├── Cargo.toml          # 项目配置
├── README.md           # 说明文档
└── src/
    ├── main.rs         # 程序入口
    ├── lib.rs          # 库入口
    ├── config.rs       # 配置模块
    ├── logger.rs       # 日志写入模块
    ├── keyboard.rs     # 键盘监听模块
    ├── clipboard.rs    # 剪贴板模块
    ├── tray.rs         # 系统托盘模块
    └── autostart.rs    # 开机自启动模块
```

### 依赖说明

| 依赖 | 用途 |
|------|------|
| `rdev` | 系统级键盘/鼠标事件监听 |
| `arboard` | 跨平台剪贴板操作 |
| `tray-icon` | 系统托盘 |
| `chrono` | 时间处理 |
| `dirs` | 获取系统目录 |
| `winreg` | Windows 注册表操作 |

---

## 路线图

### Phase 1: MVP ✅
- [x] 键盘监听
- [x] 剪贴板监听
- [x] 实时写入
- [x] 系统托盘
- [x] 开机自启动
- [x] Windows 支持

### Phase 2: 完善
- [ ] 简单的历史查看器
- [ ] 搜索功能
- [ ] 导出功能
- [ ] macOS 适配
- [ ] 设置界面

### Phase 3: 优化
- [ ] 获取当前应用/窗口信息
- [ ] 数据可视化
- [ ] 本地 AI 整理

---

## 许可证

MIT License

---

## 致谢

受到 "只要你打出来了，就要保存下来" 这一简单理念的启发。

*你打下的每一个字，都有回声。*
